(this["webpackJsonpstarter-movie-front-end"]=this["webpackJsonpstarter-movie-front-end"]||[]).push([[0],{32:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),r=c(14),i=c.n(r),a=c(5),o=c(0);var l=function(){return Object(o.jsxs)("ul",{className:"nav justify-content-start",style:{padding:"1rem 0 3rem"},children:[Object(o.jsx)("li",{className:"nav-item d-none d-lg-block d-xl-block",children:Object(o.jsx)(a.b,{className:"font-poppins-heading nav-link mx-2 text-light",to:"/",children:Object(o.jsx)("h1",{className:"h5",style:{fontStyle:"italic"},children:"WeLoveMovies"})})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(a.b,{className:"nav-link mx-2 font-weight-light text-light",to:"/movies",children:"All Movies"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(a.b,{className:"nav-link mx-2 font-weight-light text-light",to:"/theaters",children:"All Theaters"})})]})},j=c.p+"static/media/header.c47d8fe5.jpg";var d=function(){const e={background:"linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.7)), url(".concat(j,")"),backgroundPosition:"center",backgroundSize:"100% auto"};return Object(o.jsxs)("div",{className:"jumbotron jumbotron-fluid text-white border-bottom border-dark pt-0",style:e,children:[Object(o.jsx)(l,{}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h1",{className:"display-4",children:"Find your next favorite movie!"}),Object(o.jsxs)("p",{className:"lead",children:[Object(o.jsx)("em",{children:"WeLoveMovies"})," is your source for finding reviews of movies in theatres near you."]})]})]})};var h=function(e){let{error:t}=e;return t&&Object(o.jsxs)("div",{className:"alert alert-danger m-2",children:["Error: ",t.message]})};const b=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_BASE_URL||"http://localhost:5001",m=new Headers;async function O(e,t,c){try{const c=await fetch(e,t);if(204===c.status)return null;const s=await c.json();return s.error?Promise.reject({message:s.error}):s.data}catch(s){if("AbortError"!==s.name)throw console.error(s.stack),s;return Promise.resolve(c)}}function u(e){return async t=>{const c="".concat(b,"/movies/").concat(t.movie_id,"/reviews");return t.reviews=await O(c,{headers:m,signal:e},[]),t}}async function x(e){const t=new URL("".concat(b,"/movies?is_showing=true")),c=u(e);return await O(t,{headers:m,signal:e},[]).then((e=>Promise.all(e.map(c))))}async function v(e,t){const c=new URL("".concat(b,"/movies/").concat(e)),s=u(t),n=function(e){return async t=>{const c="".concat(b,"/movies/").concat(t.movie_id,"/theaters");return t.theaters=await O(c,{headers:m,signal:e},[]),t}}(t);return await O(c,{headers:m,signal:t},[]).then(s).then(n)}m.append("Content-Type","application/json");var g=function(){const[e,t]=Object(s.useState)([]),[c,n]=Object(s.useState)(null);Object(s.useEffect)((()=>{n(null);const e=new AbortController;return x(e.signal).then(t).catch(n),()=>e.abort()}),[]);const r=e.map((e=>Object(o.jsxs)("article",{className:"col-sm-12 col-md-6 col-lg-3 my-2",children:[Object(o.jsx)("img",{alt:"".concat(e.title," Poster"),className:"rounded",src:e.image_url,style:{width:"100%"}}),Object(o.jsx)(a.b,{to:"/movies/".concat(e.movie_id),className:"stretched-link text-dark",children:Object(o.jsx)("h3",{className:"font-poppins-heading text-center mt-2",children:e.title})})]},e.movie_id)));return Object(o.jsxs)("main",{className:"container",children:[Object(o.jsx)(h,{error:c}),Object(o.jsx)("h2",{className:"font-poppins",children:"Now Showing"}),Object(o.jsx)("hr",{}),Object(o.jsx)("section",{className:"row",children:r})]})};function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){const t=e.reduce(((e,t)=>e+t.score),0);return Math.round(t/e.length)}return"N/A"}var w=function(e){let{reviews:t=[]}=e;return Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Average Review Rating:"})," ",p(t)]})};var f=function(e){let{movie:t}=e;return Object(o.jsxs)("section",{className:"row mt-4",children:[Object(o.jsx)("article",{className:"col-sm-12 col-md-6 col-lg-3",children:Object(o.jsx)("img",{alt:"".concat(t.title," Poster"),className:"rounded",src:t.image_url,style:{width:"100%"}})}),Object(o.jsxs)("aside",{className:"col-sm-12 col-md-6 col-lg-9",children:[Object(o.jsx)("h3",{className:"font-poppins-heading mb-4",children:t.title}),Object(o.jsx)("p",{children:t.description}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Runtime:"})," ",t.runtime," minutes"]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Rating:"})," ",t.rating]}),Object(o.jsx)(w,{reviews:t.reviews}),Object(o.jsx)(a.b,{to:"/movies/".concat(t.movie_id),className:"btn btn-primary",children:"See More"})]})]})};var N=function(){const[e,t]=Object(s.useState)([]),[c,n]=Object(s.useState)(null);Object(s.useEffect)((()=>{n(null);const e=new AbortController;return x(e.signal).then(t).catch(n),()=>e.abort()}),[]);const r=e.map((e=>Object(o.jsx)(f,{movie:e},e.movie_id)));return Object(o.jsxs)("main",{className:"container",children:[Object(o.jsx)(h,{error:c}),Object(o.jsx)("h2",{className:"font-poppins",children:"All Movies"}),Object(o.jsx)("hr",{}),Object(o.jsx)("section",{children:r})]})},_=c(2);var y=function(e){let{movie:t}=e;return Object(o.jsxs)("section",{children:[Object(o.jsx)("h3",{className:"font-poppins-heading mb-4",children:t.title}),Object(o.jsx)("p",{children:t.description}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Runtime:"})," ",t.runtime_in_minutes," minutes"]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Rating:"})," ",t.rating]}),Object(o.jsx)(w,{reviews:t.reviews})]})},S=c(16);const R={padding:"0 0px 5px 5px"};var k=function(e){let{review:t,deleteReview:c,setReviewScore:s}=e;const{critic:n}=t;return Object(o.jsxs)("section",{className:"border p-4 mb-4",children:[Object(o.jsxs)("h4",{children:[n.preferred_name," ",n.surname,Object(o.jsxs)("small",{children:[" of ",n.organization_name]})]}),Object(o.jsx)("p",{dangerouslySetInnerHTML:{__html:S.markdown.toHTML(t.content)}}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Rating:"})," ",t.score,Object(o.jsx)("button",{className:"btn btn-link",style:R,onClick:()=>(()=>{const e=t.score+1;e>5||s(t,e)})(),children:"\u2191"}),Object(o.jsx)("button",{className:"btn btn-link",style:R,onClick:()=>(()=>{const e=t.score-1;e<1||s(t,e)})(),children:"\u2193"})]}),Object(o.jsx)("button",{className:"btn btn-danger",onClick:()=>c(t),children:"Destroy Review"})]})};var E=function(e){let{reviews:t=[],deleteReview:c,setReviewScore:s}=e;if(t.length){const e=t.sort(((e,t)=>e.critic.preferred_name.localeCompare(t.critic.preferred_name))).map((e=>Object(o.jsx)(k,{review:e,deleteReview:c,setReviewScore:s},e.review_id)));return Object(o.jsxs)("section",{className:"mt-4",children:[Object(o.jsx)("h3",{children:"Reviews"}),e]})}return null};var A=function(e){let{theater:t}=e;return Object(o.jsx)("article",{className:"col-sm-12 col-md",children:Object(o.jsx)("div",{className:"card",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{children:t.name}),Object(o.jsxs)("address",{children:[t.address_line_1,Object(o.jsx)("br",{}),t.address_line_2?t.address_line_2:null,t.city,", ",t.state," ",t.zip]})]})})})};var P=function(e){let{theaters:t=[]}=e;return t.length?Object(o.jsxs)("section",{className:"mt-4",children:[Object(o.jsx)("h4",{children:"Now Showing Here"}),Object(o.jsx)("div",{className:"row",children:t.map((e=>Object(o.jsx)(A,{theater:e},e.theater_id)))})]}):null};var T=function(){const{movieId:e}=Object(_.f)(),[t,c]=Object(s.useState)({}),[n,r]=Object(s.useState)(null);function i(e){r(null);const t=new AbortController;return v(e,t.signal).then(c).catch(r),()=>t.abort()}return Object(s.useEffect)((()=>{i(e)}),[e]),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(h,{error:n}),Object(o.jsxs)("section",{className:"row mt-4",children:[Object(o.jsx)("article",{className:"col-sm-12 col-md-6 col-lg-3",children:Object(o.jsx)("img",{alt:"".concat(t.title," Poster"),className:"rounded",src:t.image_url,style:{width:"100%"}})}),Object(o.jsxs)("aside",{className:"col-sm-12 col-md-6 col-lg-9",children:[Object(o.jsx)(y,{movie:t}),Object(o.jsx)(P,{theaters:t.theaters}),Object(o.jsx)(E,{reviews:t.reviews,deleteReview:function(e){let{movie_id:t,review_id:c}=e;(async function(e){const t="".concat(b,"/reviews/").concat(e);return await O(t,{method:"DELETE",headers:m},{})})(c).then((()=>i(t)))},setReviewScore:function(e,t){let{movie_id:c,review_id:s}=e;console.log("score",s,t),async function(e,t){const c="".concat(b,"/reviews/").concat(e),s={method:"PUT",headers:m,body:JSON.stringify({data:t})};return await O(c,s,{})}(s,{score:t}).then((()=>i(c)))}})]})]})]})};var C=function(e){let{theater:t}=e;return Object(o.jsx)("article",{className:"col-12 mb-4",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("aside",{className:"col",children:[Object(o.jsx)("h2",{children:t.name}),Object(o.jsxs)("address",{children:[t.address_line_1,Object(o.jsx)("br",{}),t.address_line_2?t.address_line_2:null,t.city,", ",t.state," ",t.zip]})]}),Object(o.jsx)("section",{className:"col",children:Object(o.jsx)("div",{className:"row",children:t.movies.map((e=>Object(o.jsx)("div",{className:"col-2",children:Object(o.jsx)(a.b,{to:"/movies/".concat(e.movie_id),children:Object(o.jsx)("img",{alt:"".concat(e.title," Poster"),src:e.image_url,className:"w-100"})})},e.movie_id)))})})]})})};var L=function(){const[e,t]=Object(s.useState)([]),[c,n]=Object(s.useState)(null);Object(s.useEffect)((()=>{n(null);const e=new AbortController;return async function(e){const t=new URL("".concat(b,"/theaters"));return await O(t,{headers:m,signal:e},[])}(e.signal).then(t).catch(n),()=>e.abort()}),[]);const r=e.map((e=>Object(o.jsx)(C,{theater:e},e.theater_id)));return Object(o.jsxs)("main",{className:"container",children:[Object(o.jsx)(h,{error:c}),Object(o.jsx)("h2",{className:"font-poppins",children:"All Theaters"}),Object(o.jsx)("hr",{}),Object(o.jsx)("section",{className:"row",children:r})]})};var M=function(){return Object(o.jsxs)(a.a,{children:[Object(o.jsx)(d,{}),Object(o.jsxs)(_.c,{children:[Object(o.jsx)(_.a,{exact:!0,path:"/",children:Object(o.jsx)(g,{})}),Object(o.jsx)(_.a,{exact:!0,path:"/movies",children:Object(o.jsx)(N,{})}),Object(o.jsx)(_.a,{exact:!0,path:"/movies/:movieId",children:Object(o.jsx)(T,{})}),Object(o.jsx)(_.a,{exact:!0,path:"/theaters",children:Object(o.jsx)(L,{})})]})]})};c(32);i.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(M,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.4b691081.chunk.js.map